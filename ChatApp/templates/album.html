<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>アルバム画面</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/album.css') }}">
</head>
<body>
  <div class="app-container">
    <!-- ヘッダー -->
    <header class="header">
      <!-- 戻るボタン -->
      <button class="button back-button" onclick="location.href='/detail/{{cid}}'">戻る</button>

      <!-- 画像追加ボタン -->
      <button class="button add-image-button" onclick="document.getElementById('image-upload').click()">画像追加</button>
      <form 
        id="image-form" 
        action="{{ url_for('create_image', cid=cid) }}" 
        method="POST" 
        enctype="multipart/form-data" 
        style="display: none;"
      >
        <input 
          type="file" 
          id="image-upload" 
          name="image" 
          accept="image/*" 
          onchange="document.getElementById('image-form').submit();"
        >
      </form>
    </header>

    <!-- アルバムコンテンツ -->
    <main class="album-container">
      {% if albums %}
        {% for album in albums %}
        <div class="image-card">
          <!-- デバッグ用に画像URLを確認したい場合 -->
          <!-- <p>{{ url_for('static', filename=album.image_url) }}</p> -->
          <img 
            src="{{ url_for('static', filename=album.image_url) }}" 
            alt="アルバム画像" 
            onerror="this.onerror=null; this.src='/static/uploads/default.jpg';"
          >
        </div>
        {% endfor %}
      {% else %}
        <p class="no-images">画像がまだ追加されていません。</p>
      {% endif %}
    </main>
  </div>
</body>
</html>
